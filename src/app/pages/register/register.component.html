<div class="auth-container">
  <div class="container">
    <div class="row shadow-lg rounded-4 overflow-hidden bg-white">
      
      <div class="col-lg-5 d-none d-lg-block p-0 position-relative">
        <div class="auth-image-container">
          <img src="https://images.unsplash.com/photo-1541339907198-e08756dedf3f?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80" 
               alt="Graduación universitaria" class="auth-image">
          
          <div class="auth-overlay">
            <div class="auth-content text-white p-5">
              <h2 class="fw-bold display-6 mb-3">Empieza tu Futuro</h2>
              <p class="lead">
                Únete a la comunidad de estudiantes más grande. Acceso gratuito, profesores expertos y la mejor preparación.
              </p>
              <ul class="list-unstyled mt-4 mb-4">
                <li class="mb-2"><i class="fas fa-check-circle me-2 text-warning"></i> Material descargable</li>
                <li class="mb-2"><i class="fas fa-check-circle me-2 text-warning"></i> Simulacros tipo admisión</li>
                <li class="mb-2"><i class="fas fa-check-circle me-2 text-warning"></i> Asesorías personalizadas</li>
              </ul>
              <div>
                <small>¿Ya tienes cuenta?</small><br>
                <a routerLink="/login" class="btn btn-outline-light mt-2 rounded-pill px-4">Inicia Sesión</a>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="col-lg-7 p-4 p-md-5">
        <div class="text-center mb-4">
          <h3 class="fw-bold text-primary">Crear Cuenta</h3>
          <p class="text-muted small">Completa tus datos para enviar tu solicitud</p>
        </div>

        <form [formGroup]="registerForm" (ngSubmit)="onSubmit()" class="register-form">
          
          <div class="row g-3">
            <div class="col-12"><h6 class="text-primary border-bottom pb-2 mb-3">Datos Personales</h6></div>
            
            <div class="col-md-6">
              <label class="form-label small fw-bold text-secondary">Nombres</label>
              <input type="text" formControlName="nombres" class="form-control bg-light">
              @if (registerForm.get('nombres')?.invalid && registerForm.get('nombres')?.touched) { <div class="error-msg"><small>Requerido</small></div> }
            </div>
            <div class="col-md-6">
              <label class="form-label small fw-bold text-secondary">Apellidos</label>
              <input type="text" formControlName="apellidos" class="form-control bg-light">
              @if (registerForm.get('apellidos')?.invalid && registerForm.get('apellidos')?.touched) { <div class="error-msg"><small>Requerido</small></div> }
            </div>
            
            <div class="col-md-6">
              <label class="form-label small fw-bold text-secondary">DNI</label>
              <input type="text" formControlName="dni" class="form-control bg-light">
              @if (registerForm.get('dni')?.invalid && registerForm.get('dni')?.touched) { <div class="error-msg"><small>8 dígitos</small></div> }
            </div>
            <div class="col-md-6">
              <label class="form-label small fw-bold text-secondary">Fecha Nacimiento</label>
              <input type="date" formControlName="fechaNacimiento" class="form-control bg-light">
              @if (registerForm.get('fechaNacimiento')?.invalid && registerForm.get('fechaNacimiento')?.touched) { <div class="error-msg"><small>Requerido</small></div> }
            </div>

            <div class="col-md-6">
              <label class="form-label small fw-bold text-secondary">Sexo</label>
              <select formControlName="sexo" class="form-select bg-light">
                <option value="">Seleccione</option>
                <option value="Masculino">Masculino</option>
                <option value="Femenino">Femenino</option>
              </select>
            </div>
            <div class="col-md-6">
              <label class="form-label small fw-bold text-secondary">Estado Civil</label>
              <select formControlName="estadoCivil" class="form-select bg-light">
                <option value="">Seleccione</option>
                <option value="Soltero(a)">Soltero(a)</option>
                <option value="Casado(a)">Casado(a)</option>
              </select>
            </div>

            <div class="col-12 mt-4"><h6 class="text-primary border-bottom pb-2 mb-3">Datos de Cuenta</h6></div>

            <div class="col-md-6">
              <label class="form-label small fw-bold text-secondary">Teléfono</label>
              <input type="text" formControlName="telefono" class="form-control bg-light">
              @if (registerForm.get('telefono')?.invalid && registerForm.get('telefono')?.touched) { <div class="error-msg"><small>Requerido</small></div> }
            </div>
            <div class="col-md-6">
              <label class="form-label small fw-bold text-secondary">Correo Electrónico</label>
              <input type="email" formControlName="email" class="form-control bg-light">
            </div>
            <div class="col-12">
              <label class="form-label small fw-bold text-secondary">Contraseña</label>
              <div class="input-group">
                <input [type]="showPassword ? 'text' : 'password'" formControlName="password" class="form-control bg-light">
                <button class="btn btn-outline-secondary" type="button" (click)="togglePasswordVisibility($event)">
                  <i class="fa-solid" [class.fa-eye]="!showPassword" [class.fa-eye-slash]="showPassword"></i>
                </button>
              </div>
              @if (registerForm.get('password')?.invalid && registerForm.get('password')?.touched) { <div class="error-msg"><small>Mínimo 6 caracteres</small></div> }
            </div>

            <div class="col-12 mt-4"><h6 class="text-primary border-bottom pb-2 mb-3">Datos Académicos</h6></div>

            <div class="col-md-6">
              <label class="form-label small fw-bold text-secondary">Universidad a Postular</label>
              <input type="text" formControlName="universidadPostular" class="form-control bg-light">
            </div>
            <div class="col-md-6">
              <label class="form-label small fw-bold text-secondary">Carrera</label>
              <input type="text" formControlName="carreraPostular" class="form-control bg-light">
            </div>
            <div class="col-12">
              <label class="form-label small fw-bold text-secondary">Colegio de Procedencia</label>
              <input type="text" formControlName="colegioProcedencia" class="form-control bg-light">
            </div>
          </div>

          @if (successMessage) {
            <div class="alert alert-success mt-4 text-center py-2"><small>{{ successMessage }}</small></div>
          }
          @if (errorMessage) {
            <div class="alert alert-danger mt-4 text-center py-2"><small>{{ errorMessage }}</small></div>
          }

          <button type="submit" [disabled]="registerForm.invalid" class="btn btn-primary w-100 mt-4 py-2 rounded-3 fw-bold shadow-sm">
            ENVIAR SOLICITUD
          </button>
          
          <div class="text-center mt-3 d-lg-none">
            <small>¿Ya tienes cuenta? <a routerLink="/login" class="text-primary text-decoration-none">Inicia Sesión</a></small>
          </div>

        </form>
      </div>

    </div>
  </div>
</div>